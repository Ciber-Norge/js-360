<!DOCTYPE html>
<html>
<head>
    <meta charset=UTF-8>
    <title>demo</title>
    <style type="text/css">
        .rotate-test {

        }

        .rotate-test img {
            position: absolute;
        }

        .hidden {
            display: none;
        }
    </style>

</head>
<body class="refresh">

    <div class="rotate-test" id="all">
        <img src="http://www.360slider.com/img/car/1.png">
        <img src="http://www.360slider.com/img/car/2.png">
        <img src="http://www.360slider.com/img/car/3.png">
        <img src="http://www.360slider.com/img/car/4.png">
        <img src="http://www.360slider.com/img/car/5.png">
        <img src="http://www.360slider.com/img/car/6.png">
        <img src="http://www.360slider.com/img/car/7.png">
        <img src="http://www.360slider.com/img/car/8.png">
        <img src="http://www.360slider.com/img/car/9.png">
        <img src="http://www.360slider.com/img/car/10.png">
        <img src="http://www.360slider.com/img/car/11.png">
        <img src="http://www.360slider.com/img/car/12.png">
        <img src="http://www.360slider.com/img/car/13.png">
        <img src="http://www.360slider.com/img/car/14.png">
        <img src="http://www.360slider.com/img/car/15.png">
        <img src="http://www.360slider.com/img/car/16.png">
        <img src="http://www.360slider.com/img/car/17.png">
        <img src="http://www.360slider.com/img/car/18.png">
        <img src="http://www.360slider.com/img/car/19.png">
        <img src="http://www.360slider.com/img/car/20.png">
        <img src="http://www.360slider.com/img/car/21.png">
        <img src="http://www.360slider.com/img/car/22.png">
        <img src="http://www.360slider.com/img/car/23.png">
        <img src="http://www.360slider.com/img/car/24.png">
        <img src="http://www.360slider.com/img/car/25.png">
        <img src="http://www.360slider.com/img/car/26.png">
        <img src="http://www.360slider.com/img/car/27.png">
        <img src="http://www.360slider.com/img/car/28.png">
        <img src="http://www.360slider.com/img/car/29.png">
        <img src="http://www.360slider.com/img/car/30.png">
        <img src="http://www.360slider.com/img/car/31.png">
        <img src="http://www.360slider.com/img/car/32.png">
        <img src="http://www.360slider.com/img/car/33.png">
        <img src="http://www.360slider.com/img/car/34.png">
        <img src="http://www.360slider.com/img/car/35.png">
        <img src="http://www.360slider.com/img/car/36.png">
        <img src="http://www.360slider.com/img/car/37.png">
        <img src="http://www.360slider.com/img/car/38.png">
        <img src="http://www.360slider.com/img/car/39.png">
        <img src="http://www.360slider.com/img/car/40.png">
        <img src="http://www.360slider.com/img/car/41.png">
        <img src="http://www.360slider.com/img/car/42.png">
        <img src="http://www.360slider.com/img/car/43.png">
        <img src="http://www.360slider.com/img/car/44.png">
        <img src="http://www.360slider.com/img/car/45.png">
        <img src="http://www.360slider.com/img/car/46.png">
        <img src="http://www.360slider.com/img/car/47.png">
        <img src="http://www.360slider.com/img/car/48.png">
        <img src="http://www.360slider.com/img/car/49.png">
        <img src="http://www.360slider.com/img/car/50.png">
        <img src="http://www.360slider.com/img/car/51.png">
        <img src="http://www.360slider.com/img/car/52.png">
    </div>
    <script src="rx.js" type="text/javascript"></script>

    <script type="text/javascript">
    function getMovementX(event) {
        return event.movementX || event.mozMovementX;
    }

    function getMouseMove(ev) {
        ev.preventDefault();
        return mouseMove;
    }

    function every10steps(x) {
        return x % 2 == 0;
    }

    function incrementCurrentImage(i) {
        current += i;

        if (current === images.length) {
            current = 0;
        } else if (current < 0) {
            current = images.length - 1;
        }
    }

    function hideImages() {
        for (var i = 1, max = images.length; i < max; i++) {
            images[i].className = "hidden";
        }
    }

    var images = document.getElementsByTagName('img');

    hideImages();

    var body = document.getElementById('all');
    var mouseDown = Rx.Observable.fromEvent(body, 'mousedown');
    var mouseUp   = Rx.Observable.fromEvent(body, 'mouseup');
    var mouseMove = Rx.Observable.fromEvent(body, 'mousemove')
                        .map(getMovementX)
                        .takeUntil(mouseUp);

    var mouseDrag = mouseDown
                        .flatMap(getMouseMove)
                        .filter(every10steps)
                        .map(function(x){
                            return x >= 0 ? 1 : -1;
                        });

    var current = 0;

    mouseDrag.subscribe(function(i) {
        images[current].className = 'hidden';
        
        incrementCurrentImage(i);

        images[current].className = '';
    });
    </script>
</body>
</html>